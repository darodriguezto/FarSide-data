#include <iostream>
#include <fstream>
#include <sstream>
#include <vector>

int main() {
    std::ifstream archivo("listaETA2012.txt"); // Nombre del archivo que contiene la lista de nombres de archivos txt
    std::vector<std::string> datosColumna4; // Vector para almacenar los datos de la columna 4
    std::vector<std::string> datosColumna5; // Vector para almacenar los datos de la columna 5
    std::vector<std::string> primerasFilas; // Vector para almacenar la primera fila de cada archivo

    if (archivo.is_open()) {
        std::string nombreArchivo;
        while (std::getline(archivo, nombreArchivo)) {
            std::ifstream archivoTxt(nombreArchivo);
            if (archivoTxt.is_open()) {
                std::string primeraLinea;
                std::getline(archivoTxt, primeraLinea);
                primerasFilas.push_back(primeraLinea); // Almacenar la primera fila del archivo

                std::string linea;
                int fila = 1;
                while (std::getline(archivoTxt, linea)) {
                    if (fila >= 8) {
                        std::istringstream iss(linea);
                        std::string dato;
                        int columna = 1;
                        while (iss >> dato) {
                            if (columna == 4) {
                                datosColumna4.push_back(dato);
                            } else if (columna == 5) {
                                datosColumna5.push_back(dato);
                            }
                            columna++;
                        }
                    }
                    fila++;
                }

                archivoTxt.close();
            } else {
                std::cout << "No se pudo abrir el archivo: " << nombreArchivo << std::endl;
            }
        }

        archivo.close();

        // Imprimir los datos de la columna 4, 5 y la primera fila
        for (std::size_t i = 0; i < datosColumna4.size(); i++) {
            std::cout << datosColumna4[i] << "\t" << datosColumna5[i] << "\t" << primerasFilas[i] << std::endl;
        }
    } else {
        std::cout << "No se pudo abrir el archivo 'listaETA2012.txt'." << std::endl;
    }

    return 0;
}

